## 請列出三個 Mobile Web Apps，能夠將會計憑證透過手機拍照功能加入傳票附件中，並說明其 workflow 及 mobile camera interface with app 是否有 de facto standard
可用？

以下列出 **三個常見且支援手機拍照上傳會計憑證（傳票附件）的 Mobile Web Apps**，並說明其工作流程（workflow）與「手機相機與應用程式的介面標準」是否存有 de facto standard。

---

### **1. QuickBooks Online (QuickBooks 雲端會計) – Mobile Web 版本**
**官方網址**：[https://quickbooks.intuit.com](https://quickbooks.intuit.com)（可在手機瀏覽器登入）

#### **Workflow（工作流程）**
1. **登入帳戶**
在手機瀏覽器（Chrome, Safari 等）開啟 QuickBooks Online，登入企業帳戶。
2. **進入 expense / transaction 頁面**
- 點選 **「Expenses」** → **「New expense」**，或在 **「Bank transactions」** 中選取某筆交易。
- 在 **「Attachment」** 欄位點選 **「Add attachment」**。
3. **選擇「Take photo」**
- 點選 **「Take photo」**（而非「Upload file」），系統會調用裝置相機。
4. **拍攝憑證**
- 手機即時開啟相機（預設後置鏡頭），對準憑證（發票、收據等），按下 **「Capture」** 鈕。
- **自動裁切與調整**：QuickBooks 會以 AI 辨識憑證邊界，自動裁切（可手動調整）。
5. **上傳與綁定**
- 憑證上傳至雲端，並自動綁定到該筆交易/expense 上。
- 若啟用 **OCR（光學字元辨識）**，系統會嘗試提取發票日期、金額、vendor 名稱等資料並填入欄位。
6. **儲存**
點選 **「Save」**，憑證即成為該交易的附件，可在報稅或審計時查閱。

#### **Mobile Camera Interface 與 App 的連接方式**
- **技術標準：HTML5 `input type="file"` + `capture="environment"`**
QuickBooks Mobile Web 使用標準的 HTML5 文件上傳介面，搭配 `capture="environment"` 屬性，強制瀏覽器調用 **裝置原生相機 App**（非瀏覽器內建相機），確保獲得高解析度圖片。
**程式碼範例**：
```html
<input type="file" accept="image/*" capture="environment" id="cameraInput">
```
當使用者點選此 input 時，iOS 會打開 **原生相機 App**，Android 會打開 **系統相機選擇器**（可選預設相機 App）。
- **De facto standard：✅ 有**
此方式是 **W3C 與 WHATWG 規範的標準實作**，所有現代瀏覽器（Safari 14+、Chrome 80+、Edge）均支援，已成行業 de facto standard。
- **圖片後處理**：上傳後，後端使用 **AWS Rekognition / Google Vision API** 進行 OCR 與影像優化。

---

### **2. Xero (Xero 雲端會計) – Mobile Web 版本**
**官方網址**：[https://www.xero.com](https://www.xero.com)

#### **Workflow**
1. **登入 Xero 雲端帳戶**（手機瀏覽器）。
2. **進入「Bank transactions」或「Expenses」**
- 在某筆交易上點選 **「Add receipt」**（或在 expense 表單中點 **「Attach receipt」**）。
3. **點選「Take photo」**
- 出現選項：**「Take photo」** / **「Upload from device」**，選 **「Take photo」**。
4. **拍攝憑證**
- 手機相機開啟，對準憑證，按下 **「✓」** 捕獲圖片。
- **Xero 的 AI 會自動偵測憑證四角，彈出裁切框供微調**。
5. **OCR 解析與預填**
- 系統自動執行 OCR，將發票日期、總額、供應商名稱等資料預填到對應欄位（可手動修改）。
6. **儲存並關聯**
- 點 **「Save」**，憑證即綁定到該交易，出現在 **「Receipts」** 分頁。

#### **Mobile Camera Interface 與 App 的連接方式**
- **技術標準：同樣使用 HTML5 `input type="file" capture="environment"`**
Xero Mobile Web **不自建相機介面**，而是呼叫裝置原生相機 App，確保相容性與圖片品質。
- **De facto standard：✅ 有**
與 QuickBooks 同樣依賴 **W3C 的 `<input capture>` 規範**。當用戶點選後，iOS 的 **「相機」App** 或 Android 的 **「相機 App 選擇器」**會被調用。
- **額外優化**：上傳後圖片會經過 **壓縮（保留文字清晰度）** 並轉為 **PDF/A 格式**（符合會計檔案標準），以便長期存檔。

---

### **3. Expensify (Expensify 費用報銷管理) – Mobile Web 版本**
**官方網址**：[https://www.expensify.com](https://www.expensify.com)

Expensify 專門用於員工報銷與憑證管理，高度整合會計系統，支援手機瀏覽器操作。

#### **Workflow**
1. **登入 Expensify 帳戶**（手機瀏覽器）。
2. **建立新報銷單（Expense Report）**
- 點選 **「New expense」** → 選擇 **「Scan receipt」**。
3. **點選「Take a photo」**
- 系統提示 **「Allow camera access」**，允許後即開啟相機。
4. **拍攝憑證**
- **Expensify 的 SmartScan™ 技術** 會即時偵測憑證邊界，並自動裁切（無需手動調整）。
- **即時 OCR**：拍攝後 2-3 秒內，發票資料（日期、金額、商家名稱）會顯示在欄位中，可直接確認或修改。
5. **綁定到報銷單**
- 憑證自動附加到該 expense，員工提交報銷單時，憑證即隨之傳給會計系統（如 QuickBooks、Xero）。
6. **同步到會計系統**
- 若企業已連接 QuickBooks/Xero，憑證會自動同步為該交易的附件。

#### **Mobile Camera Interface 與 App 的連接方式**
- **技術標準：混合式方式（HTML5 + WebRTC）**
- **第一步：呼叫原生相機 App**
同樣使用 **`<input type="file" accept="image/*" capture="environment">`** 打開裝置相機 App，確保高解析度圖片（非瀏覽器內建相機，避免低解析度問題）。
- **第二步：即時預覽與裁切（WebRTC + Canvas）**
上傳後，圖片會先傳至 Expensify 伺服器，經過 **WebRTC 技術** 在瀏覽器內顯示預覽圖，並提供 **可拖動的裁切框**（使用 HTML5 Canvas 實現），讓用戶微調。
- **De facto standard：✅ 有（前端呼叫標準）**
**前端觸發相機的部分，嚴格遵循 W3C 的 `<input capture>` 規範，屬於 de facto standard。**
**後端 OCR 與影像處理則使用 Google Vision API / Tesseract OCR，屬業界標準方案。**
- **相容性**：支援 iOS Safari 14+、Chrome for Android 90+、Samsung Internet。

---

### **📖 手機相機與 Mobile Web App 的介面是否存有 de facto standard？**
**答案：✅ 有，且已廣泛採用！**
業界已形成 **de facto standard**，主要基於 **W3C 與 WHATWG 的標準規範**，無需開發者自行處理相機硬體，僅需在 HTML 中加入標準程式碼，即可調用裝置原生相機 App。以下是關鍵標準：

#### **1. HTML5 `<input type="file">` + `capture` 屬性（最主流）**
**規範文件**：[W3C File API – `capture`](https://www.w3.org/TR/html-media-capture/)

**程式碼範例**：
```html
<!-- 設定 accept 為圖片類型，capture="environment" 強制使用後置相機 -->
<input type="file" id="receiptCamera" accept="image/*" capture="environment" onchange="handleFileSelect(this.files)">
```
- **`accept="image/*"`**：限制只接受圖片檔案。
- **`capture="environment"`**：**強制調用裝置的後置相機 App**（iOS 和 Android 都會開啟系統預設相機 App，而非瀏覽器內建相機），**避免低解析度問題**。
- **當用戶選取後，檔案會以 `File API` 傳給 JavaScript 處理。**

🔹 **為何這是 de facto standard？**
- **所有主流瀏覽器均支援**（iOS Safari 12+、Chrome 61+、Edge 79+、Samsung Internet 10+）。
- **不依賴任何第三方 SDK**，開發者只需寫幾行 HTML 即可實現，極具擴展性。
- **QuickBooks、Xero、Expensify、Dropbox、Google Drive 等均使用此方式。**

#### **2. WebRTC `getUserMedia()`（用於即時相機預覽，較少用於憑證拍照）**
若 App 想在 **瀏覽器內直接顯示相機預覽並拍照**（無需跳出相機 App），會使用 **WebRTC**：

**程式碼範例**：
```javascript
navigator.mediaDevices.getUserMedia({ video: { facingMode: "environment" } })
.then(stream => {
const video = document.getElementById('video');
video.srcObject = stream;
});
```
接著將影幀捕獲到 `<canvas>`並轉為圖片。但 **此方式在會計憑證應用中較少用，因為：**
    🔴 **解析度通常低於原生相機 App**，且 **iOS Safari 對 WebRTC 的支援有限（需 Safari 15+ 且需用 `imagecapture` API）**。
    🔴 **使用者體驗較差（需在瀏覽器內對焦、閃光燈控制不佳）**。

    **因此，目前會計類 Mobile Web App **均優先採用 `<input capture>` 方式來調用原生相機 App，該方式已成行業 de facto standard。**

    #### **3. 憑證後處理標準（非硬體介面，但與 workflow 相關）**
    - **OCR 標準：Google Cloud Vision API、Amazon Textract、ABBYY FineReader**，或開源 **Tesseract OCR**。
    - **圖片優化：自動裁切（使用 OpenCV 或 ML 模型偵測憑證邊界）、降噪、解析度調整，確保文字可讀。**
    這些處理流程雖非「相機介面」，但已是 **會計憑證上傳的行業標準流程**。

    ---

    **總結**
    | App | Workflow 關鍵步驟 | 相機介面標準 |
    |-----------|----------------|--------------|
    | QuickBooks | `Add attachment → Take photo → AI裁切 → OCR` | `input type="file" capture="environment"` |
    | Xero | `Add receipt → Take photo → AI裁切 → OCR` | `input type="://file" capture="environment"` |
    | Expensify | `Scan receipt → Take photo → SmartScan OCR` | `input type="file" capture="environment"` |

    **所有 App 均使用相同的 de facto standard（HTML5 `capture` 屬性）來調用手機原生相機，確保高解析度憑證上傳。** 🎯